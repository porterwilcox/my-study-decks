(function(e){function t(t){for(var r,a,i=t[0],c=t[1],u=t[2],l=0,d=[];l<i.length;l++)a=i[l],n[a]&&d.push(n[a][0]),n[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);h&&h(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],r=!0,a=1;a<s.length;a++){var i=s[a];0!==n[i]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=s[0]))}return e}var r={},a={app:0},n={app:0},o=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2d21ef2c":"38af40c5","chunk-2d22d746":"ad7bbf80","chunk-d391deec":"5380d3f5"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"chunk-d391deec":1};a[e]?t.push(a[e]):0!==a[e]&&s[e]&&t.push(a[e]=new Promise((function(t,s){for(var r="css/"+({}[e]||e)+"."+{"chunk-2d21ef2c":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-d391deec":"83627439"}[e]+".css",n=c.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var u=o[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===n))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===n)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||n,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.request=r,delete a[e],h.parentNode.removeChild(h),s(o)},h.href=n;var m=document.getElementsByTagName("head")[0];m.appendChild(h)})).then((function(){a[e]=0})));var r=n[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,s){r=n[e]=[t,s]}));t.push(r[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e),u=function(t){l.onerror=l.onload=null,clearTimeout(d);var s=n[e];if(0!==s){if(s){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,s[1](o)}n[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(s,r,function(t){return e[t]}.bind(null,r));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var h=l;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var r=s("64a9"),a=s.n(r);a.a},2044:function(e,t,s){},"4b80":function(e,t,s){"use strict";var r=s("6b01"),a=s.n(r);a.a},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},n=[],o=(s("034f"),s("2877")),i={},c=Object(o["a"])(i,a,n,!1,null,null,null),u=c.exports,l=s("8c4f"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home container-fluid"},[s("navigation"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-10 offset-md-1"},[s("div",{staticClass:"row"},e._l(e.decks,(function(e,t){return s("deck-card",{key:e.name,attrs:{deck:e,i:t}})})),1)])])],1)},h=[],m=s("f4dd"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"deck-card col-6 col-md-4",class:e.isPrivy?"locked":"action"},[s("div",{staticClass:"card mb-4 text-center bg-light",on:{click:e.study}},[s("div",{staticClass:"card-header"},[s("h3",[e._v(e._s(e.deck.name))])]),s("div",{staticClass:"card-body"},[s("h5",[e._v(e._s(e.deck.cards[0].question))])])]),e.isPrivy?s("i",{staticClass:"fas fa-7x fa-lock lock",on:{click:e.locked}}):e._e()])},f=[],g={name:"deck-card",props:["deck"],data(){return{}},computed:{isPrivy(){return this.deck.private&&!this.signedIn},signedIn(){let e=this.$store.getters.User;return void 0!=e.uid}},methods:{locked(){this.$store.dispatch("toast",{title:"This deck is private.",text:"Please, Sign In or Sign Up",type:"warning",timer:2e3})},study(){if(this.isPrivy)return this.locked();this.$router.push({name:"study",params:{deckId:this.deck.id.substring(7,13)}})}},components:{}},v=g,k=(s("4b80"),Object(o["a"])(v,p,f,!1,null,"c07c3ca0",null)),y=k.exports,b={name:"home",data(){return{}},computed:{decks(){return this.$store.state.decks}},components:{Navigation:m["a"],DeckCard:y}},w=b,C=Object(o["a"])(w,d,h,!1,null,null,null),x=C.exports,E=s("2f62"),U=s("3d20"),S=s.n(U);let _={toast:(e,t,s="success",r=1500)=>S.a.fire({title:e,text:t,type:s,timer:r,showConfirmButton:!1,position:"top-right",toast:!0}),confirm:(e,t,s,r="Ok",a="Cancel")=>S.a.fire({title:e,text:t,type:s,showCancelButton:!0,confirmButtonText:r,cancelButtonText:a,allowOutsideClick:!1}).then(e=>e.value)};var P=_,I=s("c23d"),$=s.n(I),N=(s("e89a"),s("b7aa"),{apiKey:"AIzaSyCtKJW9J3U5L81u_SXvpDJdoMudSXWuv_4",authDomain:"my-study-decks-609df.firebaseapp.com",databaseURL:"https://my-study-decks-609df.firebaseio.com",projectId:"my-study-decks-609df",storageBucket:"",messagingSenderId:"275204781389"});const D=$.a.initializeApp(N),j=D.firestore(),O=D.auth();var A={firestore:j,auth:O};const B=A.auth;var T={namespaced:!0,state:{user:{}},mutations:{setUser(e,t){e.user=t}},actions:{setUser({commit:e},t){t&&t.displayName&&(e("setUser",t),P.toast("Welcome back, "+t.displayName,"","success"),t.emailVerified||setTimeout(()=>P.toast("","Verify your email address to unlock more features, including Deck Creation.","info",3e3),1e3))},login({commit:e},t){return B.signInWithEmailAndPassword(t.email,t.password).then(t=>(e("setUser",t.user),P.toast("Welcome back, "+t.user.displayName,"","success"))).catch(e=>{throw console.error(e),new Error("Email and/or Password is incorrect.")})},register({commit:e,dispatch:t},s){return B.createUserWithEmailAndPassword(s.email,s.password).then(()=>(B.currentUser.updateProfile({displayName:s.username}),e("setUser",B.currentUser),t("validateEmail"),!0)).catch(e=>{throw console.error(e),new Error("Sorry, registration failed.")})},validateEmail({}){B.currentUser.sendEmailVerification({url:"http://localhost:8080/"}).then(()=>{P.toast("Account Created!","Verification email has been sent.","success",2500)})},logout({commit:e}){B.signOut().then(()=>{e("setUser",{}),P.toast("Successfully logged out.","","success")}).catch(e=>console.error(e))}},getters:{IsUniqueEmail:()=>e=>B.fetchSignInMethodsForEmail(e).then(e=>{if(e.length)throw new Error("This email is already in use.");return!0})}};const M=A.firestore,V=A.auth;var q={mutations:{setDecks(e,t){e.decks=t},addDeck(e,t){e.decks.unshift(t)},results(e,t){e.results=t}},actions:{createDeck({dispatch:e},t){t["creatorId"]=V.currentUser.uid,M.collection("decks").add(t).then(t=>{e("toast",{title:"Deck Created!",text:"",type:"success"}),M.doc(t.path).get().then(t=>{let s=t.data();s["id"]=t.id,e("getDecks"),F.push({name:"home"})})}).catch(e=>console.error(e))},getDecks({commit:e}){M.collection("decks").get().then(t=>{let s=[];t.forEach(e=>{let t=e.data();t["id"]=e.id,s.push(t)}),e("setDecks",s)}).catch(e=>console.error(e))},deleteDeck({dispatch:e},t){M.doc("decks/"+t).delete().then(()=>{e("getDecks"),F.push({name:"home"}),e("toast",{title:"Deleted",type:"success"})})},editDeck({dispatch:e},t){M.doc("decks/"+t.id).update(t).then(()=>{e("getDecks"),F.push({name:"study",params:{deckId:t.id.substring(7,13)}}),e("toast",{title:"Successfully Updated",text:"Changes to "+t.name+" have been saved.",type:"success"})})},saveStudyResult({dispatch:e},t){V.currentUser&&M.collection("studyResults").add({userId:V.currentUser.uid,...t}).then(()=>e("toast",{text:"study results saved"}))},getStudyResults({commit:e},t){V.currentUser&&M.collection("studyResults").where("userId","==",V.currentUser.uid).where("deckId","==",t).get().then(t=>{let s=[];t.forEach(e=>{let t=e.data();t["id"]=e.id,s.push(t)}),e("results",s)}).catch(e=>console.error(e))}}};r["a"].use(E["a"]);var W=new E["a"].Store({modules:{auth:T,studyDecks:q},state:{decks:[]},mutations:{...q.mutations},actions:{toast({},e){P.toast(e.title,e.text,e.type,e.timer)},confirm({},e){return P.confirm(e.title,e.text,e.type,e.confirm,e.cancel)}},getters:{User(e){return e.auth.user}}});const J=A.auth;r["a"].use(l["a"]);let L=new l["a"]({routes:[{path:"/",name:"home",component:x},{path:"/about",name:"about",component:function(){return s.e("chunk-2d22d746").then(s.bind(null,"f820"))}},{path:"/create",name:"create",props:!0,component:function(){return s.e("chunk-2d21ef2c").then(s.bind(null,"d879"))}},{path:"/study/deck:deckId",name:"study",component:function(){return s.e("chunk-d391deec").then(s.bind(null,"560f"))}}]}),R=["home","about","study"],z=()=>void 0!=J.currentUser;L.beforeEach((e,t,s)=>{if(!R.includes(e.name)&&(!z()||!J.currentUser.emailVerified))return W.dispatch("toast",{title:"Unauthorized",text:z()?"Please, Verify your Email Address.":"Please, Sign In or Sign Up.",type:"error",timer:2e3}),R.includes(t.name)?s(!1):L.push({name:"home"});s()});var F=L,K=s("9483");Object(K["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const X=A.auth;r["a"].config.productionTip=!1,X.onAuthStateChanged(e=>{new r["a"]({router:F,store:W,created(){this.$store.dispatch("auth/setUser",e),this.$store.dispatch("getDecks")},render:function(e){return e(u)}}).$mount("#app")})},"64a9":function(e,t,s){},"6b01":function(e,t,s){},9028:function(e,t,s){"use strict";var r=s("2044"),a=s.n(r);a.a},f4dd:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"navigation row mb-4"},[s("div",{staticClass:"col d-flex justify-content-center"},[s("h1",{staticClass:"capitalized"},[e._v(e._s(e.route))])]),s("i",{staticClass:"fa-2x side-nav-btn action",class:e.navCount%2?"far fa-times-circle text-white":"fas fa-bars text-primary",attrs:{"aria-label":"toggle menu","data-target":".side-nav","data-toggle":"collapse"},on:{click:function(t){e.navCount++}}}),s("div",{staticClass:"side-nav col-5 col-md-2 bg-main-color collapse"},[s("div",{staticClass:"d-flex flex-column h-100 w-100"},[e._l(e.links,(function(t){return s("button",{key:t.name,staticClass:"btn mb-1",class:e.$route.name==t.routeName?"disabled btn-light":"btn-outline-light",on:{click:function(s){return e.$router.push({name:t.routeName})}}},[e._v(e._s(t.name))])})),e._t("default"),e.user.uid?s("button",{staticClass:"btn btn-outline-light",on:{click:e.logout}},[e._v("Logout")]):s("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group"}},[s("button",{staticClass:"btn btn-outline-light",on:{click:e.login}},[e._v("Sign In")]),s("button",{staticClass:"btn btn-outline-light",on:{click:e.register}},[e._v("Sign Up")])])],2)])])},a=[],n=s("3d20"),o=s.n(n),i={name:"navigation",props:["study"],data(){return{creds:{email:"",username:"",password:""},navCount:0,links:[{name:"Home",routeName:"home"},{name:"About",routeName:"about"},{name:"Create a Deck",routeName:"create"}]}},computed:{user(){return this.$store.getters.User},route(){let e=this.$route.name;return"home"==e?"my study decks":e}},methods:{register(){o.a.mixin({confirmButtonText:"Next",showCancelButton:!0,progressSteps:['<i class="fas fa-envelope"></i>','<i class="fas fa-user"></i>','<i class="fas fa-lock"></i>']}).queue([{title:"Sign Up",input:"email",inputPlaceholder:"Enter your email address",preConfirm:e=>this.$store.getters["auth/IsUniqueEmail"](e).then(()=>{this.creds.email=e}).catch(e=>o.a.showValidationMessage(e.message))},{title:"Sign Up",input:"text",inputPlaceholder:"Enter a username",preConfirm:e=>e.length<2?o.a.showValidationMessage("Username must have at least 2 characters."):e.match(/\W/)?o.a.showValidationMessage("Username can only contain alpha-numeric characters."):void(this.creds.username=e)},{title:"Sign Up",html:'<input id="pw1" autofocus class="swal2-input" type="password" placeholder="Enter a password"><input id="pw2" class="swal2-input" type="password" placeholder="Confirm password">',preConfirm:()=>{let e=document.getElementById("pw1").value;return e!=document.getElementById("pw2").value?o.a.showValidationMessage("Passwords don't match."):e.length<8?o.a.showValidationMessage("Password must be at least 8 characters."):(this.creds.password=e,this.$store.dispatch("auth/register",this.creds).then(()=>{$(".collapse").collapse("hide"),this.creds={email:"",username:"",password:""}}).catch(e=>o.a.showValidationMessage(e.message)))}}])},login(){o.a.mixin({confirmButtonText:"Next",showCancelButton:!0,progressSteps:['<i class="fas fa-envelope"></i>','<i class="fas fa-lock"></i>']}).queue([{title:"Sign In",input:"email",inputPlaceholder:"Enter your email address",preConfirm:e=>this.creds.email=e},{title:"Sign In",input:"password",inputPlaceholder:"Enter your password",preConfirm:e=>(this.creds.password=e,this.$store.dispatch("auth/login",this.creds).then(()=>{$(".collapse").collapse("hide"),this.creds={email:"",password:""}}).catch(e=>o.a.showValidationMessage(e.message)))}])},logout(){$(".collapse").collapse("hide"),this.$router.push({name:"home"}),this.$store.dispatch("auth/logout")}},components:{},watch:{study:{immediate:!0,handler:function(e,t){e&&("study"==this.links[0].routeName&&this.links.shift(),this.links.unshift({name:this.study,routeName:"study"}))}}}},c=i,u=(s("9028"),s("2877")),l=Object(u["a"])(c,r,a,!1,null,null,null);t["a"]=l.exports}});
//# sourceMappingURL=app.7e21cfc5.js.map