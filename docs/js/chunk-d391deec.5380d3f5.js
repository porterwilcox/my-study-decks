(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d391deec"],{4969:function(t,e,s){},"560f":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"study container-fluid"},[s("navigation",{attrs:{study:t.deck.name}},[(t.user.uid=t.deck.creatorId)?s("div",{staticClass:"btn-group btn-group-md mb-2 mt-1",attrs:{role:"group"}},[s("button",{staticClass:"btn btn-outline-light",on:{click:t.edit}},[t._v("Edit")]),s("button",{staticClass:"btn btn-outline-light",on:{click:t.deleteDeck}},[t._v("Delete")])]):t._e()]),s("div",{staticClass:"row my-4"},t._l(t.deck.cards,(function(e,r){return s("div",{key:r,staticClass:"col d-flex justify-content-center"},[s("p",{staticClass:"circle action",class:{active:e==t.activeCard,green:t.correct.has(e),red:t.wrong.has(e)},on:{click:function(s){return t.jumpToCard(e)}}},[t._v(t._s(r+1))])])})),0),s("div",{staticClass:"row justify-content-center align-items-center"},[s("flip-card",{staticClass:"col-10 col-md-6 text-center",attrs:{card:t.activeCard},on:{status:t.processStatus},scopedSlots:t._u([t.finished?{key:"front",fn:function(){return[s("h1",[t._v("You got "+t._s(t.percent)+"% correct!")])]},proxy:!0}:null,t.finished?{key:"back",fn:function(){return[s("h2",[t._v("What would you like to do?")]),s("div",{staticClass:"btn-group-vertical btn-group-md",attrs:{role:"group"}},[t.percent<100?s("button",{staticClass:"btn btn-outline-secondary",on:{click:t.studyMissed}},[t._v("Study the cards I missed")]):t._e(),s("button",{staticClass:"btn btn-outline-secondary",on:{click:t.shuffleStudy}},[t._v("Shuffle the deck")]),s("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.$router.push({name:"home"})}}},[t._v("Back to Home")])])]},proxy:!0}:null],null,!0)})],1)],1)},i=[],c=s("f4dd"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flip-card",attrs:{tabindex:"1"}},[s("div",{staticClass:"fc-inner card d-flex justify-content-center align-items-center"},[s("div",{staticClass:"fc-front text-center"},[t._t("front",[s("h1",[t._v(t._s(t.card.question))])])],2),s("div",{staticClass:"fc-back text-center"},[t._t("back",[s("h1",[t._v(t._s(t.card.answer))]),s("div",{staticClass:"btn-group btn-group-md",attrs:{role:"group"}},[s("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.status("wrong")}}},[t._v("Wrong")]),s("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.status("correct")}}},[t._v("Correct")])])])],2)])])},a=[],d={name:"flip-card",props:["card"],data(){return{}},computed:{},methods:{status(t){this.$emit("status",t)}},components:{}},o=d,u=(s("8254"),s("2877")),l=Object(u["a"])(o,n,a,!1,null,null,null),h=l.exports,f={name:"study",props:[],beforeRouteLeave(t,e,s){this.deck.cards=this.restore,this.result.results.length&&this.$store.dispatch("saveStudyResult",{deckId:this.deck.id,...this.result}),this.$store.commit("results",[]),s()},mounted(){this.deck.id&&this.$store.dispatch("getStudyResults",this.deck.id)},data(){return{correct:new Set,wrong:new Set,activeCard:{},percent:"",restore:[],studied:new Set,result:{studyDate:Date.now(),results:[]}}},computed:{deck(){let t=this.$route.params.deckId;return this.$store.state.decks.find(e=>e.id.substring(7,13)==t)||{cards:[]}},user(){return this.$store.getters.User},finished(){let t=this.correct.size+this.wrong.size==this.deck.cards.length&&0!=this.deck.cards.length;return t&&this.setResult(),t}},methods:{async deleteDeck(){let t=await this.$store.dispatch("confirm",{title:"Are you sure you want to delete this deck?",text:"Deleted decks cannot be restored.",type:"warning",confirm:"Delete"});t&&this.$store.dispatch("deleteDeck",this.deck.id)},edit(){this.$router.push({name:"create",params:{deckToEdit:this.deck}})},processStatus(t){this[t].add(this.activeCard),this[t]=new Set(this[t]);let e=this.deck.cards.indexOf(this.activeCard);this.studied.add(e);let s=this.calcNext(e);s&&(this.activeCard=s)},calcNext(t){for(let e=0;e<this.deck.cards.length;e++)if(!this.studied.has(e))return this.deck.cards[e];return null},jumpToCard(t){this.finished||(this.correct.delete(t),this.wrong.delete(t),this.activeCard=t)},shuffleStudy(){let t=[],e=[...this.restore];while(e.length)t.push(e.splice(Math.floor(Math.random()*e.length),1)[0]);this.deck.cards=t,this.resetStudy()},studyMissed(){this.deck.cards=Array.from(this.wrong),this.resetStudy()},resetStudy(){this.activeCard=this.deck.cards[0],this.correct=new Set,this.wrong=new Set,this.studied=new Set},setResult(){this.percent=100*(this.correct.size/this.deck.cards.length).toFixed(2);let t="review incorrect";this.restore.length==this.deck.cards.length&&(t="entire deck"),this.result.results.push({type:t,percent:this.percent})}},components:{Navigation:c["a"],FlipCard:h},watch:{deck:{immediate:!0,handler:function(t){t.id&&(this.activeCard=t.cards[0],this.restore=t.cards)}}}},p=f,k=(s("968e"),Object(u["a"])(p,r,i,!1,null,null,null));e["default"]=k.exports},8254:function(t,e,s){"use strict";var r=s("9d9b"),i=s.n(r);i.a},"968e":function(t,e,s){"use strict";var r=s("4969"),i=s.n(r);i.a},"9d9b":function(t,e,s){}}]);
//# sourceMappingURL=chunk-d391deec.5380d3f5.js.map